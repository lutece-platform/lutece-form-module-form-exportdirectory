<p class="lead">#i18n{module.form.exportdirectory.configuration_exportdirectory.title}</p>
<#if permission_manage>
	<#if is_mapped>
		<p class="help-block">#i18n{module.form.exportdirectory.configuration_exportdirectory.is_mapped.title} : 
		<strong>${mapped_directory_title}</strong>
		</p>
		<p>
		<label class="radio-inline" for="delete_mapping_directory">
			<input type="radio" name="action_exportdirectory" id="delete_mapping_directory" tabindex="1" value="delete_mapping_directory" onclick="javascript:display()"/>
			<i class="glyphicon glyphicon-trash"></i>&nbsp;#i18n{module.form.exportdirectory.configuration_exportdirectory.removeMappingDirectory} 
		</label>
	</#if>
	<label for="create_directory" class="radio-inline">
        <input type="radio" name="action_exportdirectory" id="create_directory" tabindex="1" value="create_directory" onclick="javascript:display()">
		<#if is_mapped>#i18n{module.form.exportdirectory.configuration_exportdirectory.isMapped.createDirectory}<#else>#i18n{module.form.exportdirectory.configuration_exportdirectory.createDirectory}</#if> 
	</label>
	<#if !directory_list_is_empty>
	<label for="use_directory_exist" class="radio-inline">
	        <#if use_directory_exist>
	        <input type="radio" name="action_exportdirectory" id="use_directory_exist" tabindex="1" value="use_directory_exist" checked="checked" onclick="javascript:display()">
			<#else>
	        <input type="radio" name="action_exportdirectory" id="use_directory_exist" tabindex="1" value="use_directory_exist" onclick="javascript:display()">
			</#if>
		<#if is_mapped>#i18n{module.form.exportdirectory.configuration_exportdirectory.isMapped.useDirectory}<#else>#i18n{module.form.exportdirectory.configuration_exportdirectory.useDirectory}</#if>
	</label>
	</p>
	<div class="well" id="display_use_directory_exist">
		<div class="form-group">
			<label for="directory_list">#i18n{module.form.exportdirectory.configuration_exportdirectory.directoryExist}</label>
		   	<div class="input-group">
				<@comboWithParams name="id_directory" items=directory_list default_value="directory_list_default_item" additionalParameters="class='form-control input-sm'" />
				<div class="input-group-btn">
					<button class="btn btn-default btn-sm" type="submit" name="redirect">
					<i class="glyphicon glyphicon-ok"></i>
					</button>
				</div>
			</div>
		</div>
		<div class="form-group">
		<label>#i18n{module.form.exportdirectory.configuration_exportdirectory.useDirectory.title}</label>
		</div>
		<div class="form-group">
		<#list entry_configuration_list as entry>
		<label>${entry.use_directory_form_entry.formEntryTitle} *</label>
		    <@comboWithParams name="id_entry_directory_for_form_entry_${entry.use_directory_form_entry.idFormEntry}" items=entry.use_directory_list_directory_entry default_value="entry.use_directory_default_directory_entry" additionalParameters="class='form-control input-sm'" />
			<span class="help-block"></span>
		</#list>
		</div>
	</div>
	</#if>
	
	
	
	
	<div class="well" id="display_create_directory">
			<#if workflow_list?exists && workflow_list?size &gt; 0 >
			<div class="form-group">
			<label for="id_workflow">#i18n{module.form.exportdirectory.configuration_exportdirectory.labelAddWorkflow}
			</label>
				<@comboWithParams name="id_workflow"  items=workflow_list default_value="-1" additionalParameters="class='form-control input-sm'" />
			</div>
			</#if>
			<#if entry_configuration_list?exists && entry_configuration_list?size &gt; 0 >
			<table class="table table-striped">
				<tr>
					<th>#i18n{module.form.exportdirectory.configuration_exportdirectory.entry_form}</th>
		  			<th>#i18n{module.form.exportdirectory.configuration_exportdirectory.result_list}</th>
		  			<th>#i18n{module.form.exportdirectory.configuration_exportdirectory.search}</th>
	  			</tr>
				<#list entry_configuration_list as entry>
				<tr>
					<td>${entry.use_directory_form_entry.formEntryTitle}</td>
					<td><input type="checkbox" name="is_in_result_list_${entry.use_directory_form_entry.idFormEntry}" /></td>
					<#if entry.use_directory_form_entry_type!=entry_type_file & entry.use_directory_form_entry_type!=entry_type_image>
					<td><input type="checkbox" name="is_in_search_${entry.use_directory_form_entry.idFormEntry}" /></td>
						<#else>
					<td>&nbsp;</td>
					</#if>
				</tr>
				</#list>
			</table>
			</#if>
			<p>#i18n{module.form.exportdirectory.configuration_exportdirectory.labelAddNumberingEntry}</p>
			
			<label class="radio-inline" for="add_numbering_entry1">
				<input type="radio" name="add_numbering_entry" id="add_numbering_entry1" tabindex="1" value="1" checked="checked">#i18n{module.form.exportdirectory.configuration_exportdirectory.labelAddNumberingEntryYes}
			</label>
			<label class="radio-inline" for="add_numbering_entry2">
				<input type="radio" name="add_numbering_entry" id="add_numbering_entry2" tabindex="1" value="0">#i18n{module.form.exportdirectory.configuration_exportdirectory.labelAddNumberingEntryNo}
			</label>
			
			<div class="form-group">
				<label for="add_numbering_entry_prefix">#i18n{module.form.exportdirectory.configuration_exportdirectory.labelAddNumberingEntryPrefix}
				</label>
				<input type="text" name="add_numbering_entry_prefix" value="" class="form-control input-sm" maxlength="255">
			</div>
			
			<div class="checkbox">
			<label for="activate_directory_record">
			    <input name="activate_directory_record" id="activate_directory_record" value="1" type="checkbox" checked="checked">
				#i18n{module.form.exportdirectory.configuration_exportdirectory.useDirectory.activate_directory_record}
			</label>
		   	<p class="help-block">
				#i18n{module.form.exportdirectory.configuration_exportdirectory.useDirectory.activate_directory_record_comment}
			</p>
			</div>
			
			<div class="checkbox">
			<label for="is_indexed">
				<input name="is_indexed" id="is_indexed" value="1" type="checkbox" checked="checked">#i18n{module.form.exportdirectory.configuration_exportdirectory.useDirectory.is_indexed}
			</label>
		   	<p class="help-block">#i18n{module.form.exportdirectory.configuration_exportdirectory.useDirectory.is_indexed_comment}</p>
			</div>
			
			<#if create_directory?has_content>
				<p>#i18n{module.form.exportdirectory.configuration_exportdirectory.createDirectory.title}</p>
				<#list create_directory as entry>
				<div class="row">
					<div class="col-md-2"><strong>${entry.form_entry.title} *</strong></div>
					<div class="col-md-9">
					<#list entry.directory_entry_type as entry_type>
					<label class="radio-inline">
						<input type="radio" name="id_entry_type_${entry.form_entry.idEntry}" value="${entry_type.idType}">
						#i18n{${entry_type.titleI18nKey}}
					</label>
					</#list>
					</div>
				</div>
				</#list>
			</#if>
			<#if (list_entry_image?size > 0) >
					<label for="">#i18n{module.form.exportdirectory.configuration_exportdirectory.image_configuration} :</label>
						<#list list_entry_image as image>
							<p><label for="">${image.title}</label>
								
									<label for="create_thumbnail_${image.idEntry}">#i18n{module.form.exportdirectory.configuration_exportdirectory.generate_thumbnail}:</label>
									<input type="checkbox" name="create_thumbnail_${image.idEntry}" id="create_thumbnail_${image.idEntry}" onclick="hideField( 'create_thumbnail_${image.idEntry}', 'thumbnail_field_${image.idEntry}' );">
									<div name="thumbnail_field_${image.idEntry}" id="thumbnail_field_${image.idEntry}">
										<label for="">&nbsp;</label>
										<label for="thumbnail_height_${image.idEntry}">#i18n{module.form.exportdirectory.configuration_exportdirectory.thumbnail_height} * :</label> 
										<input type="text" name="thumbnail_height_${image.idEntry}" id="thumbnail_height_${image.idEntry}">
										<br>
										<label for="">&nbsp;</label>
										<label for="thumbnail_width_${image.idEntry}">#i18n{module.form.exportdirectory.configuration_exportdirectory.thumbnail_width} * :</label> 
										<input type="text" name="thumbnail_width_${image.idEntry}" id="thumbnail_width_${image.idEntry}">
									</div>
									
									<label for="">&nbsp;</label><label for="create_big_thumbnail_${image.idEntry}">#i18n{module.form.exportdirectory.configuration_exportdirectory.generate_big_thumbnail}:</label>
									<input type="checkbox" name="create_big_thumbnail_${image.idEntry}" id="create_big_thumbnail_${image.idEntry}" onclick="hideField( 'create_big_thumbnail_${image.idEntry}', 'big_thumbnail_field_${image.idEntry}' )">
									<div name="big_thumbnail_field_${image.idEntry}" id="big_thumbnail_field_${image.idEntry}">									
										<label for="">&nbsp;</label>
										<label for="">#i18n{module.form.exportdirectory.configuration_exportdirectory.thumbnail_height} * :</label>
										<input type="text" name="big_thumbnail_height_${image.idEntry}" id="big_thumbnail_height_${image.idEntry}">
										<br>
										<label for="">&nbsp;</label>
										<label for="">#i18n{module.form.exportdirectory.configuration_exportdirectory.thumbnail_width} * :</label> 
										<input type="text" name="big_thumbnail_width_${image.idEntry}" id="big_thumbnail_width_${image.idEntry}">
									</div>
								
							</p>
						</#list>
					
				</#if>
				<#list list_entry_geolocalisation as entry>
					<label for="create_directory_${entry.idEntry}">${entry.title} <#if entry.mapProvider?has_content> (${entry.mapProvider.displayedName}) </#if></label> *
					    <#list list_directory_map_providers as map_provider>
					    	${map_provider.displayedName}<input type="radio" name="key_geolocation_${entry.idEntry}" value="${map_provider.key}" />
					    </#list>
						<label class="radio">
					    #i18n{module.form.exportdirectory.configuration_exportdirectory.noMapProvider}<input type="radio" name="key_geolocation_${entry.idEntry}" value="none" />
						</label>
				</#list>
		</div>
		<#if record_form &gt; 0>
			<div class="" id="record_Form">
				<span class="badge badge-warning"><i class="glyphicon glyphicon-warning-sign"></i></span> #i18n{module.form.exportdirectory.configuration_exportdirectory.labelExportAll}
				<label for="export_all" class="radio-inline">
					<input type="radio" name="export_all" id="export_record_form" tabindex="1" value="1" checked="checked" >
					#i18n{module.form.exportdirectory.configuration_exportdirectory.labelExportAllYes}
				</label>
				<label for="export_all" class="radio-inline">
					<input type="radio" name="export_all" id="export_record_form" tabindex="1" value="0"/>#i18n{module.form.exportdirectory.configuration_exportdirectory.labelExportAllNo}
				</label>
			</div>
		</#if>
<#else>
	<div class="alert alert-error alert-right">
		#i18n{module.form.exportdirectory.configuration_exportdirectory.labelNotPermission}
	</div>
</#if>
<script type="text/javascript">
/*
function submitForm(){
if(document.getElementById("form_directory")!=null){
	document.getElementById("form_directory").submit();
	}
}
*/
<#if (list_entry_image?size > 0) >
<#list list_entry_image as image>
document.getElementById( 'thumbnail_field_${image.idEntry}' ).style.display="none";
document.getElementById( 'big_thumbnail_field_${image.idEntry}' ).style.display="none";
</#list>
</#if>

function display(){
		<#if record_form &gt; 0>
			document.getElementById("record_Form").style.display="none";
		</#if>
		<#if !directory_list_is_empty>
			document.getElementById("display_use_directory_exist").style.display="none";
		</#if>
		<#if create_directory?has_content>
			document.getElementById("display_create_directory").style.display="none";
		</#if>	
		var create = document.getElementById("create_directory");
		var use = document.getElementById("use_directory_exist");
		document.getElementById("display_create_directory").style.display="none";
		if(create.checked)
		{
			<#if record_form &gt; 0>
				document.getElementById("record_Form").style.display="block";
			</#if>
			<#if !directory_list_is_empty>
				document.getElementById("display_use_directory_exist").style.display="none";
			</#if>
			document.getElementById("display_create_directory").style.display="block";
		}
		<#if !directory_list_is_empty>
		if(use.checked)
		{
			<#if record_form &gt; 0>
			document.getElementById("record_Form").style.display="block";
			</#if>
			<#if !directory_list_is_empty>
				document.getElementById("display_use_directory_exist").style.display="block";
			</#if>
			document.getElementById("display_create_directory").style.display="none";

		}
		</#if>
	}
	display();


function hideField( checkbox, field ){
var objcheckbox = document.getElementById(checkbox);
var objfield = document.getElementById(field);		
objfield.style.display=(objcheckbox.checked==false)?"none":"block";
return true;
}
</script>

